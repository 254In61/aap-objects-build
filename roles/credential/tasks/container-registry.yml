---
# Docker hub
# - name: Create docker container hub credential
#   ansible.controller.credential:
#     name: "{{ docker_registry }}"
#     organization: "{{ organization_name }}"
#     state: present
#     credential_type: Container Registry
#     inputs:
#       username: "{{ docker_user }}"
#       password: "{{ docker_access_token }}"
#     validate_certs: false

- name: Set variables for docker registry 
  ansible.builtin.set_fact:
    credential_name: "{{ docker_aap_credential_name }}"
    organization: "{{ organization_name }}"
    credential_type: "{{ docker_aap_credential_type }}"
    username: "{{ docker_user }}"
    password: "{{ docker_password }}"

- name: Call build-credential module
  ansible.builtin.import_tasks: ../../../modules/build-credential.yml